(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){"use strict";t.r(n);var o=t(15),r=t.n(o),c=t(6),a=t(3),u=t(1),i=t(0),l=function(e){var n=e.filter,t=e.handleChange;return Object(i.jsxs)("div",{children:["Filter names: ",Object(i.jsx)("input",{value:n,onChange:t})]})},s=function(e){var n=e.handleSubmit,t=e.newName,o=e.handlePersonChange,r=e.newNumber,c=e.handleNumberChange;return Object(i.jsxs)("form",{onSubmit:n,children:[Object(i.jsx)("h2",{children:"Add new contact"}),Object(i.jsxs)("div",{children:["Name: ",Object(i.jsx)("input",{value:t,onChange:o})]}),Object(i.jsxs)("div",{children:["Number: ",Object(i.jsx)("input",{value:r,onChange:c})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"Add"})})]})},d=function(e){var n=e.person,t=e.handleDelete;return Object(i.jsxs)("p",{children:[n.name," ",n.number," ",Object(i.jsx)("button",{onClick:t,children:"Delete"})]})},b=function(e){var n=e.personsToShow,t=e.deletePerson;return n.map((function(e){return Object(i.jsx)(d,{person:e,handleDelete:function(){return t(e.id)}},e.name)}))},f=function(e){var n=e.notification;return null===n?null:Object(i.jsx)("div",{style:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:n})},h=function(e){var n=e.errorMessage;return null===n?null:Object(i.jsx)("div",{style:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:n})},j=t(4),m=t.n(j),O="/api/persons",p=function(){return m.a.get(O).then((function(e){return e.data}))},g=function(e){return m.a.post(O,e).then((function(e){return e.data}))},v=function(e){return m.a.delete("".concat(O,"/").concat(e)).then((function(e){return e.data}))},x=function(e,n){return m.a.put("".concat(O,"/").concat(e),n).then((function(e){return e.data}))},w=function(){var e=Object(u.useState)([]),n=Object(a.a)(e,2),t=n[0],o=n[1],r=Object(u.useState)(""),d=Object(a.a)(r,2),j=d[0],m=d[1],O=Object(u.useState)(""),w=Object(a.a)(O,2),S=w[0],y=w[1],C=Object(u.useState)(""),k=Object(a.a)(C,2),N=k[0],D=k[1],P=Object(u.useState)(null),T=Object(a.a)(P,2),A=T[0],B=T[1],z=Object(u.useState)(null),E=Object(a.a)(z,2),I=E[0],J=E[1];Object(u.useEffect)((function(){console.log("effect"),p().then((function(e){console.log("promise fulfilled"),o(e)}))}),[]);var L=function(e){B(e),setTimeout((function(){B(null)}),4e3)},M=t.filter((function(e){return e.name.toLowerCase().includes(N.toLowerCase())}));return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(f,{notification:A}),Object(i.jsx)(h,{errorMessage:I}),Object(i.jsx)(l,{filter:N,handleChange:function(e){D(e.target.value)}}),Object(i.jsx)(s,{handleSubmit:function(e){e.preventDefault();var n=t.find((function(e){return e.name===j}));if(n){if(window.confirm("".concat(j," is already added to phonebook. Do you want to replace the old number with the new one?"))){var r=Object(c.a)(Object(c.a)({},n),{},{number:S});x(r.id,r).then((function(){o(t.map((function(e){return e.id!==r.id?e:r}))),L("Updated number for ".concat(r.name," to ").concat(r.number))})).catch((function(e){var n;o(t.filter((function(e){return e!==r.name}))),n="Information for ".concat(r.name," has already been removed"),J(n),setTimeout((function(){J(null)}),4e3)}))}}else g({name:j,number:S}).then((function(e){o(t.concat(e)),L("Added ".concat(e.name," to phonebook"))})).catch((function(e){console.log(e.response.data.error),L(e.response.data.error)}));m(""),y("")},newName:j,handlePersonChange:function(e){m(e.target.value)},newNumber:S,handleNumberChange:function(e){y(e.target.value)}}),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)(b,{personsToShow:M,deletePerson:function(e){window.confirm("Delete contact?")&&v(e).then((function(){o(t.filter((function(n){return n.id!==e}))),L("Person deleted successfully")})).catch((function(e){alert("del name failed")}))}})]})};r.a.render(Object(i.jsx)(w,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.b2a35d6c.chunk.js.map